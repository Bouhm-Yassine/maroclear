<form nz-form [nzLayout]="'vertical'" [formGroup]="form">
  <nz-form-item class="w-full">
    <nz-form-label nzRequired>Type de clé</nz-form-label>
    <nz-form-control nzErrorTip="Veuillez choisir le type de la clé">
      <nz-select nz-input formControlName="key_type">
        <nz-option
          *ngFor="let o of key_types"
          [nzLabel]="o"
          [nzValue]="o"
        ></nz-option>
      </nz-select>
    </nz-form-control>
  </nz-form-item>

  <ng-container
    *ngIf="form.get('key_type')?.value == 'Public key'; else clientTemplate"
  >
    <nz-form-item class="w-full">
      <nz-form-label nzRequired>Public key</nz-form-label>
      <nz-form-control>
        <input nz-input formControlName="public_key" id="public_key" />
      </nz-form-control>
    </nz-form-item>
  </ng-container>

  <ng-template #clientTemplate>
    <div class="flex justify-between gap-5">
      <nz-form-item class="w-full">
        <nz-form-label nzRequired>Nom</nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="nom" id="nom" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item class="w-full">
        <nz-form-label nzRequired>Prénom</nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="prenom" id="prenom" />
        </nz-form-control>
      </nz-form-item>
    </div>
    <div class="flex justify-between gap-5">
      <nz-form-item class="w-full">
        <nz-form-label nzRequired>CIN</nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="cin" id="cin" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item class="w-full">
        <nz-form-label nzRequired>Date de naissance</nz-form-label>
        <nz-form-control>
          <nz-date-picker
            class="w-full"
            formControlName="date_naissance"
          ></nz-date-picker>
        </nz-form-control>
      </nz-form-item>
    </div>
  </ng-template>
</form>

<div *nzModalFooter>
  <button nz-button nzType="default" (click)="onCancel()" class="mr-1">
    Annuler
  </button>

  <button nz-button nzType="primary" (click)="onSave()" [nzLoading]="loading()">
    Sauvegarder
  </button>
</div>
